<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="ISO-8859-1">
	<title>Buy Page</title>
</head>
<body>
	List of purchasable service packages: <br>
	<table style="width:100%; border: 1px solid black; border-collapse: collapse;">
		<tr th:each="sp : ${servicePackages}" style="border: 1px solid black;">
			<th>
				<span th:text="${sp.name}">Service Package name</span><br>
			</th>
			<td>
				<div th:if="${sp.fixedPhone != null}">
					<ul><li>Fixed Phone</li></ul>
				</div>
				<div th:if="${sp.fixedInternet != null}">
					<ul><li>Fixed Internet
						<ul>
							<li>Number of included Gigabytes: <span th:text="${sp.fixedInternet.numGigaFI}"></span></li>
							<li>Fee for extra Gigabytes: <span th:text="${#numbers.formatDecimal(
											sp.fixedInternet.extraGigaFeeFI, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
						</ul>
					</li></ul>
				</div>
				<div th:if="${sp.mobilePhone != null}">
					<ul><li>Mobile Phone
						<ul>
							<li>Number of minutes: <span th:text="${sp.mobilePhone.numMin}"></span></li>
							<li>Number of SMSs: <span th:text="${sp.mobilePhone.numSMS}"></span></li>
							<li>Fee for extra minutes: <span th:text="${#numbers.formatDecimal(
											sp.mobilePhone.minFee, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
							<li>Fee for extra SMSs: <span th:text="${#numbers.formatDecimal(
											sp.mobilePhone.smsFee, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
						</ul>
					</li></ul>
				</div>
				<div th:if="${sp.mobileInternet != null}">
					<ul><li>Mobile Internet
						<ul>
							<li>Number of included Gigabytes: <span th:text="${sp.mobileInternet.extraGigaFeeMI}"></span></li>
							<li>Fee for extra Gigabytes: <span th:text="${#numbers.formatDecimal(
											sp.mobileInternet.extraGigaFeeMI, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
						</ul>
					</li></ul>
				</div>
			</td>
			<td>
				<table>
					<tr>
						<th>Optional products</th>
					</tr>
					<tr th:if="${sp.optionalProducts.empty}"><td>There are no available optional products</td></tr>
					<tr th:each="op : ${sp.optionalProducts}">
						<td>
							<input type="checkbox" th:value="${op.idOP}" th:id="${op.idOP}" 
											th:name="${sp.idServicePackage + '_OptionalProducts'}">
								<span th:text="${op.nameOP}"></span>
							<ul>
								<li>Monthly fee: <span th:text="${#numbers.formatDecimal(
											op.monthlyFeeOP, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
							</ul>
						</td>
					</tr>
				</table>
			</td>
			<td>
				<table>
					<tr>
						<th>Validity period</th>
					</tr>
					<tr th:each="vp : ${validityPeriods}">
						<td>
							<input type="radio" th:value="${vp.idValidityPeriod}" th:id="${vp.idValidityPeriod}" 
											th:name="${sp.idServicePackage + '_validityPeriod'}" checked required>
								Number of months: <span th:text="${vp.numMonth}"></span><br>
								Monthly fee: <span th:text="${#numbers.formatDecimal(
												vp.monthlyFee, 0, 'COMMA', 2, 'POINT')}"></span>&euro;
						</td>
					</tr>
				</table>
			</td>
			<td>
				Start date: <input type="date" id="startDate" name="startDate" required>
			</td>
			<td>
				<form action="GoToConfirmPage" method="POST">
				    <input type="submit" value="Confirm" />
				</form>
			</td>
		</tr>
	</table>	
</body>
</html>