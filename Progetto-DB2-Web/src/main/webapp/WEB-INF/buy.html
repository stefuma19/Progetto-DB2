<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="ISO-8859-1">
	<title>Buy Page</title>
</head>
<body> 
	<table style="width:60%; border-collapse: collapse; margin-left: auto; margin-right: auto;"><tr>
		<td style="text-align: center; vertical-align: middle;" colspan=2>
			<h2>List of purchasable service packages</h2></td></tr>
		<tr><td style="text-align: center; width:50%"><a href="GoToHomePage">Home page</a></td>
			<td th:if="${session.consUsername != null && session.consUsername != ''}" style="text-align: center;">
				<a href="GoToBuyPage">Logout</a></td>
			<td th:if="${session.consUsername == null || session.consUsername == ''}" style="text-align: center;">
				<a href="index.html">Login</a></td>
	</tr></table>
	<br>
	<table style="width:100%; border: 1px solid black; border-collapse: collapse;">
		<tr th:each="sp : ${servicePackages}" style="border: 1px solid black;">
			<td><form action="GoToConfirmPage" method="POST">
				<table style="width:100%;  text-align: left;">
					<tr>
						<th style="width: 10%">
							<span th:text="${sp.name}">Service Package name</span><br>
							<input type="hidden" name="idSP" th:value="${sp.idServicePackage}">
						</th>
						<td style="width: 25%">
							<div th:if="${sp.fixedPhone != null}">
								<ul><li>Fixed Phone</li></ul>
							</div>
							<div th:if="${sp.fixedInternet != null}">
								<ul><li>Fixed Internet
									<ul>
										<li>Number of included Gigabytes: <span th:text="${sp.fixedInternet.numGigaFI}"></span></li>
										<li>Fee for extra Gigabytes: <span th:text="${#numbers.formatDecimal(
														sp.fixedInternet.extraGigaFeeFI, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
									</ul>
								</li></ul>
							</div>
							<div th:if="${sp.mobilePhone != null}">
								<ul><li>Mobile Phone
									<ul>
										<li>Number of minutes: <span th:text="${sp.mobilePhone.numMin}"></span></li>
										<li>Number of SMSs: <span th:text="${sp.mobilePhone.numSMS}"></span></li>
										<li>Fee for extra minutes: <span th:text="${#numbers.formatDecimal(
														sp.mobilePhone.minFee, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
										<li>Fee for extra SMSs: <span th:text="${#numbers.formatDecimal(
														sp.mobilePhone.smsFee, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
									</ul>
								</li></ul>
							</div>
							<div th:if="${sp.mobileInternet != null}">
								<ul><li>Mobile Internet
									<ul>
										<li>Number of included Gigabytes: <span th:text="${sp.mobileInternet.extraGigaFeeMI}"></span></li>
										<li>Fee for extra Gigabytes: <span th:text="${#numbers.formatDecimal(
														sp.mobileInternet.extraGigaFeeMI, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
									</ul>
								</li></ul>
							</div>
						</td>
						<td style="width: 25%">
							<table style="text-align: left;">
								<tr>
									<th>Optional products</th>
								</tr>
								<tr th:if="${sp.optionalProducts.empty}"><td>There are no available optional products</td></tr>
								<tr th:each="op : ${sp.optionalProducts}">
									<td>
										<input type="checkbox" th:value="${op.idOP}" th:id="${op.idOP}" 
														th:name="${sp.idServicePackage + '_optionalProducts'}">
											<span th:text="${op.nameOP}"></span>
										<ul>
											<li>Monthly fee: <span th:text="${#numbers.formatDecimal(
														op.monthlyFeeOP, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
										</ul>
									</td>
								</tr>
							</table>
						</td>
						<td style="width: 20%">
							<table style="text-align: left;">
								<tr>
									<th>Validity period</th>
								</tr>
								<tr th:each="vp : ${validityPeriods}">
									<td>
										<table><tr><td>
											<input type="radio" th:value="${vp.idValidityPeriod}" th:id="${vp.idValidityPeriod}" 
															th:name="${sp.idServicePackage + '_validityPeriod'}" checked required>
										</td><td>
												Number of months: <span th:text="${vp.numMonth}"></span><br>
												Monthly fee: <span th:text="${#numbers.formatDecimal(
																vp.monthlyFee, 0, 'COMMA', 2, 'POINT')}"></span>&euro;
										</td></tr></table>
									</td>
								</tr>
							</table>
						</td>
						<td style="width: 15%">
							Start date: <input type="date" id="startDate" name="startDate" required>
						</td>
						<td style="width: 5%">
							    <input type="submit" value="Confirm"/>
						</td>
					</tr>
				</table>
			</form></td>
		</tr>
	</table>	
</body>
</html>