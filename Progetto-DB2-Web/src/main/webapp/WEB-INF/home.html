<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="ISO-8859-1">
	<title>Home page</title>
</head>
<body>
	<table style="width:60%; border-collapse: collapse; margin-left: auto; margin-right: auto;"><tr>
		<td style="text-align: center; vertical-align: middle;">
			<table><tr>
				<td colspan=2>
					<h2>Welcome <span th:text="${session.consUsername}"> consUsername </span></h2></td></tr>
				<tr><td style="width:700px"><a href="GoToBuyPage">Buy a service package</a></td>
				<td th:if="${session.consUsername != null && session.consUsername != ''}" style="width:700px">
					<a href="GoToBuyPage">Logout</a></td>
				<td th:if="${session.consUsername == null || session.consUsername == ''}" style="width:700px">
					<a href="index.html">Login</a></td>
			</tr></table>
			<br>
		</td></tr><tr><td>
			<table><tr><td>
				<table style="width:100%; border: 1px solid black; border-collapse: collapse;">
					<tr th:each="sp : ${servicePackages}" style="border: 1px solid black;">
						<td th:if="${sp.idServicePackage % 2 == 1}" style="border: 1px solid black; height:320px; width:700px">
							<div th:insert="@{WEB-INF/fragmentHome.html} :: sp"></div>
						</td>			
					</tr>
				</table>
			</td><td>
				<table style="width:100%; border: 1px solid black; border-collapse: collapse;">
					<tr th:each="sp : ${servicePackages}" style="border: 1px solid black;">
						<td th:if="${sp.idServicePackage % 2 == 0}" style="border: 1px solid black;  height:320px; width:700px">
							<div th:insert="@{WEB-INF/fragmentHome.html} :: sp"></div>
						</td>			
					</tr>
				</table>
			</td></tr></table>	
			<br><hr>
			<div th:if="${session.consIsInsolvent}">
				<div th:if="${invalidOrders != null}">
					<table>
						<tr th:each="ord : ${invalidOrders}" >
							<td>
							<div>
								<ul><li>Order of service package "<span th:text="${ord.servicePackage.name}"></span>"
									<ul>
										<li>Total value: <span th:text="${#numbers.formatDecimal(ord.totValue, 0, 'COMMA', 2, 'POINT')}"></span>&euro;</li>
										<li>Purchase data: <span th:text="${#dates.format(ord.creationDate, 'dd-MMM-yyyy')}"></span></li>
										<li>Activation data: <span th:text="${#dates.format(ord.startDate, 'dd-MMM-yyyy')}"></span></li>
										
									</ul>
								</li></ul>
							</div>
							<form action="GoToConfirmPage" method="POST">
								<input type="hidden" id="orderId" name="orderId" th:value="${ord.idOrder}">
							    <input type="submit" value="Confirm" />
							</form>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</td>
	</tr></table>
</body>
</html>